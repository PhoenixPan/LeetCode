## Solution 1

Iterative solution with linear space complexity. Could be done with O(1) spoace.    

Time complexity: O(n)  
Space complexity: O(n)  


```java
public class Solution {
    HashMap<RandomListNode, RandomListNode> visited = new HashMap<>();

    public RandomListNode copyRandomList(RandomListNode head) {
        RandomListNode dummy = new RandomListNode(0);
        RandomListNode output = dummy;
        
        while (head != null) {
            RandomListNode copy = new RandomListNode(head.label);
            visited.put(head, copy);
            copy.next = getNodeCopy(head.next);
            copy.random = getNodeCopy(head.random); 
            dummy.next = copy;
            dummy = dummy.next;
            head = head.next;
        }

        return output.next;
    }

    private RandomListNode getNodeCopy(RandomListNode node) {
        if (node == null) {
            return null;
        }

        if (!visited.containsKey(node)) {
            RandomListNode copy = new RandomListNode(node.label);
            visited.put(node, copy);  
        }
        return visited.get(node);
    }
}
```